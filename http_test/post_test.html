<!DOCTYPE html>
<html>
	<head>
		<style>
			#formContainer{ 
				display: flex;
				flex-direction: column;
				height: 300px;
			}
			#formContainer > div{
				  width: 400px; 
				  height: 100px; 
				  margin: auto; 
			}
			#formContainer > div > *{
				width: 100%;
				height: 30%;
			}
		</style>
	</head>
<body>

	<h2>XMLHttpRequest using POST method</h2>
	<div id = "formContainer">
		<div>
			<Input id = "arduinoURLInput" type="text" value = "http://192.168.0.12/" ></input>
		</div>
		<div>
			<button type="button" onclick="loadRequest('postjson')">Request post method</button> <! calling of a request/>
		</div>
		<div>
			<button type="button" onclick="loadRequest('reset')">Reset</button> <! call reset/>
		<div>
	</div>

	<p id="test"></p>

<script>


var testData = 
	{
		param1:"value1",
		param2:"value2",
	arrayParam:[11,22,33,44,55]
	}

function loadRequest(m) {
	var test = document.getElementById("test");
	var url = document.getElementById("arduinoURLInput").value;
	fetch(url + m + "/", {
		method: 'post',
		body: JSON.stringify(testData),
		headers: {
			"Access-Control-Allow-Origin" : "*",
			"Access-Control-Allow-Methods" : "GET,POST,PUT,DELETE,OPTIONS",
			"Access-Control-Allow-Headers": "Content-Type, Access-Control-Allow-Origin, Access-Control-Allow-Headers, Authorization, X-Requested-With",
			'Accept': 'application/json',
			'Content-Type': 'application/json'
		}
	}).then((response) => {
	  return response.json();
	}).then((res) => {
		if (res.status === 201) {
			console.log("Post successfully created!")
			test.style.color = 'auto';	
			test.innerHTML = JSON.stringify(res);
		 }
	}).catch((error) => {
		console.log(error)
		test.innerHTML = error;
		test.style.color = 'red';
		
	})

}

</script>
</body>
</html>